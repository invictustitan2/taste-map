# Wrangler Configuration for Taste Map API
# Documentation: https://developers.cloudflare.com/workers/wrangler/configuration/

# Worker name - will be visible in Cloudflare dashboard
name = "taste-map-api"

# Main entry point for the worker
main = "src/index.js"

# Compatibility date - determines which Cloudflare Workers runtime features are available
# Using a stable date for consistent behavior
compatibility_date = "2024-01-01"

# Enable Node.js compatibility mode
# Allows use of Node.js built-in modules like 'crypto', 'buffer', etc.
node_compat = true

# Observability settings - enable logging and tracing
[observability]
enabled = true

# D1 Database Binding
# Binds a D1 database to the worker with the name "DB"
# After creating the database with: wrangler d1 create tastemap_db
# Replace YOUR_DATABASE_ID with the actual database ID from the output
[[d1_databases]]
binding = "DB"  # Access in code via env.DB
database_name = "tastemap_db"
database_id = "ec40cc6f-a6b6-42e0-b692-ae427de05781"  # TODO: Replace with actual D1 database ID

# Workers AI Binding
# Provides access to Cloudflare's AI models for recommendations
[ai]
binding = "AI"  # Access in code via env.AI

# Environment Variables (non-sensitive)
# Note: Use 'wrangler secret put' for sensitive values like API keys
# Example: wrangler secret put TMDB_API_KEY
# Example: wrangler secret put IMPORT_SECRET
# [vars]
# ENVIRONMENT = "production"
